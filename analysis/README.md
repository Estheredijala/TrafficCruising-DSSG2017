# Analysis Code
The folder includes supplementary code which aids in creating a directed graph grid of the area of interest, determine the sensor detection rate across a sensor grid, and visualize the estimated paths of interest throughout the routing pipeline.

## overpass_queries
Use these scripts on [Overpass Turbo](http://overpass-turbo.eu/) to query all intersections included in the directed graph (__overpass_node_query.overpassql__), and all bus routes passing through the region defined thereby (__overpass_bus_routes.overpassql__). The output generated by the intersections script will be of the format necessary for inclusion in the pipeline (see data/__nodes.geojson__), though manual modification of the edges in the directed graph will still be required before new intersections/sensors can be incorporated into the pipeline. Querying all relevant edges via Overpass Turbo without either including their full relations or omitting individual edges is, however, not straightforward. Hence, edge connections are defined manually in pipeline/__graph_generator.py__.

## ancillary_analyses
Additional information in script headers and comments.
 + __second_ave_analysis.R__ and __second_ave_stats.R__ are for comparing sensor strengths along Second Avenue.  
 + __distributions.py__ is for acquiring and comparing velocity distributions of travelers along individual street segments. Not implemented in the pipeline, but could be used to help distinguish walkers, bikers, and vehicles under various traffic conditions.
 + __traffic_cruising_correlation.R__ compares _cruising as % total traffic_ (from Jul 31, 2017), _total traffic_ (from Jul 31, 2017), and _% parking occupancy_ (From May 19, 2017). Just run the full pipeline for May 19 and switch out the occupancy data file in this script to get a clearer comparison.

## diagnostic_visualizations
R scripts for viewing pre- and post-routed paths, and for generating images of the sensor grid with intersections labeled. More info in script headers.
